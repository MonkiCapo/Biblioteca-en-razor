-- Active: 1764935079768@@127.0.0.1@3306
DROP DATABASE IF EXISTS Biblioteca;
CREATE DATABASE Biblioteca;

USE Biblioteca;

-- TABLA DE ROLES
CREATE TABLE Rol (
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Nombre VARCHAR(50) NOT NULL
);

-- TABLA DE USUARIOS
CREATE TABLE Usuario (
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Nombre VARCHAR(100) NOT NULL,
    Email VARCHAR(200) NOT NULL UNIQUE,
    PasswordHash VARCHAR(255) NOT NULL,
    RolId INT NOT NULL DEFAULT 2,
    FOREIGN KEY (RolId) REFERENCES Rol(Id)
);

-- CAT√ÅLOGO GENERAL DE LIBROS (LO CREA SOLO EL ADMIN)
CREATE TABLE CatalogoLibro (
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Titulo VARCHAR(200) NOT NULL,
    Autor VARCHAR(200) NOT NULL,
    Anio INT,
    Descripcion TEXT,
    ImagenUrl VARCHAR(300)
);

CREATE TABLE Libro ( 
    Id INT AUTO_INCREMENT PRIMARY KEY,
    Titulo VARCHAR(200) NOT NULL,
    Autor VARCHAR(200) NOT NULL,
    Anio INT, Descripcion TEXT,
    UsuarioId INT,
    ImagenUrl VARCHAR(300),
    FOREIGN KEY (UsuarioId) REFERENCES Usuario(Id)
);



